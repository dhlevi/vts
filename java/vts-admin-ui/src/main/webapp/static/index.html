<!DOCTYPE html>
<html>
  <head>
    <title>Vivid Topology Service Admin Page</title>
    <!-- Vue -->
    <script src="https://cdn.jsdelivr.net/npm/vue"></script>
    <!-- jquery -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" crossorigin=""></script>
    <!-- Materialize -->
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/css/materialize.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/js/materialize.min.js"></script>
	<!-- Leaflet -->
	<link rel="stylesheet" href="https://unpkg.com/leaflet@1.4.0/dist/leaflet.css"
	  integrity="sha512-puBpdR0798OZvTTbP4A8Ix/l+A4dHDD0DGqYW6RQ+9jxkRFclaxxQb/SJAWZfWAkuyeQUytO7+7N4QKrDh+drA=="
	  crossorigin=""/>
	<script src="https://unpkg.com/leaflet@1.4.0/dist/leaflet.js"
	  integrity="sha512-QVftwZFqvtRNi0ZyCtsznlKSWOStnDORoefr1enyq5mVL4tmKB3S/EnC3rRJcxCPavG10IcrVGSmPh6Qw5lwrg=="
	  crossorigin=""></script>
	<!-- ESRI Leaflet -->
	<script src="https://unpkg.com/esri-leaflet@2.1.3/dist/esri-leaflet.js"
		    integrity="sha512-pijLQd2FbV/7+Jwa86Mk3ACxnasfIMzJRrIlVQsuPKPCfUBCDMDUoLiBQRg7dAQY6D1rkmCcR8286hVTn/wlIg=="
		    crossorigin=""></script>
    <link rel="stylesheet" href="https://js.arcgis.com/4.4/esri/css/main.css" />
    <!-- Omnivore, for converting file uploads -->
    <script src='https://api.mapbox.com/mapbox.js/plugins/leaflet-omnivore/v0.2.0/leaflet-omnivore.min.js'></script>
    <!-- js plumb -->
    <script src='jsplumb.js'></script>
    <!-- zoomooz -->
    <script type="text/javascript" src="jquery.zoomooz-helpers.js"></script>
	<script type="text/javascript" src="jquery.zoomooz-anim.js"></script>
	<script type="text/javascript" src="jquery.zoomooz-core.js"></script>
	<script type="text/javascript" src="purecssmatrix.js"></script>
	<script type="text/javascript" src="sylvester.src.stripped.js"></script>
	<script type="text/javascript" src="jquery.zoomooz-zoomButton.js"></script>
	<script type="text/javascript" src="jquery.zoomooz-zoomTarget.js"></script>
	<script type="text/javascript" src="jquery.zoomooz-zoomContainer.js"></script>
    <!-- vts-ui -->
    <script src="vts.js"></script>
    <script src="vts-processor-helper.js"></script>
    <link rel="stylesheet" type="text/css" href="vts.css" />
    <!-- tree css override -->
    <style type="text/css">
	</style>
	<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  </head>
  <body onresize="resizeMargins();" style="background: #f5f5f5">
    <header>
	  	<!-- Title bar -->
	  	<nav style="background-color: #474444;">
	      <div class="navbar-fixed" style="position: relative; background-color: #474444;">
	        <a href="#" class="brand-logo truncate" style="margin-left: 10px; left: 300px;" onclick="togglePanels('defaultPanel')">Vivid Topology Service Admin UI</a>
			<ul id="nav-mobile" class="right"> <!-- hide-on-med-and-down -->
	          <li><a href="#!" style="margin: 0px;" onclick="$('#userDialog').modal('open');"><i class="material-icons">account_circle</i></a></li>
	          <li><a href="#!" style="margin: 0px;" data-target="slide-out" class="sidenav-trigger"><i class="material-icons">menu</i></a></li>
	        </ul>
	        <ul id="nav-mobile" class="right hide-on-med-and-down"> <!-- hide-on-med-and-down -->
	          <li><span id="userNameLabel">Not Logged In</span></li>
	        </ul>
	      </div>
	    </nav>
	    <ul id="slide-out" class="sidenav sidenav-fixed" style="background-color: #474444;">
	      <li><div class="user-view" style="height: 170px;">
	        <div class="background black">
	          <img src="logo_.jpg" style="height: 170px; width: 300px;">
	        </div>
	      </div></li>
	      <li><span class="subheader white-text" style="padding: 0 32px;">Service Status: <a id="serviceStatus" class="subheader" style="color: #f2f2f2;"></a></span></li>
	      <li><a class="subheader" style="color: #f2f2f2;">Engines</a></li>
		  <li><div class="divider"></div></li>
	      <li><a href="#!" class="waves-effect" style="color: #f2f2f2;" onclick="togglePanels('enginePanels')"><i class="material-icons" style="color: #f2f2f2;">settings_input_antenna</i>Engine Status</a></li>
	      <li><a class="subheader" style="color: #f2f2f2;">Current Requests</a></li>
	      <li><div class="divider"></div></li>
	      <li><a href="#!" class="waves-effect" style="color: #f2f2f2;" onclick="togglePanels('projectPanels')"><i class="material-icons" style="color: #f2f2f2;">build</i>Projects</a></li>
	      <li><a href="#!" class="waves-effect" style="color: #f2f2f2;" onclick="togglePanels('requestPanels')"><i class="material-icons" style="color: #f2f2f2;">play_for_work</i>Requests</a></li>
	      <li><a href="#!" class="waves-effect" style="color: #f2f2f2;" onclick="togglePanels('taskPanels')"><i class="material-icons" style="color: #f2f2f2;">schedule</i>Scheduled Tasks</a></li>
	      <li><a class="subheader" style="color: #f2f2f2;">Engine Options</a></li>
	      <li><div class="divider"></div></li>
	      <li><a href="#!" class="waves-effect" style="color: #f2f2f2;" onclick="restartEngine();"><i class="material-icons" style="color: #f2f2f2;">autorenew</i>Restart Engine</a></li>
	      <li><a href="#!" class="waves-effect" style="color: #f2f2f2;" onclick="flushQueues();"><i class="material-icons" style="color: #f2f2f2;">clear</i>Flush Queues</a></li>
	      <li><a href="#!" class="waves-effect" style="color: #f2f2f2;" onclick="togglePanels('logPanel')"><i class="material-icons" style="color: #f2f2f2;">message</i>Logs &amp; Messages</a></li>
	      <li><a class="subheader hide-on-med-and-down" style="color: #f2f2f2;">Request Creator</a></li>
	      <li><div class="divider hide-on-med-and-down"></div></li>
	      <li class="hide-on-med-and-down"><a href="#!" class="waves-effect" style="color: #f2f2f2;" onclick="togglePanels('creatorPanel')"><i class="material-icons" style="color: #f2f2f2;">create</i>Create</a></li>
	    </ul>
    </header>
    <main style="margin-left: 200px;">
      <div class="">
      	<div id="defaultPanel" class="row">
			<div class="row">
			    <div class="col s12">
			      <div class="card" style="max-height: 600px;">
			        <div class="card-image black" style="max-height: 600px;">
			          <img src="logo.jpg" style="display: block; margin-left: auto; margin-right: auto; max-width: 520px;">
			          <span class="card-title">Welcome to the Vivid Topology Service</span>
			        </div>
			        <div class="card-content">
			          <p>The Vivid Topology Service (VTS) is a service that allows for the execution of complex topology tasks and validations.</p>
			          <p>Some more information could go here. Maybe some serice stats... (running processes, queue size, etc.)</p>
			        </div>
			      </div>
			    </div>
  			</div>
    	</div>
      	<div id="enginePanels" class="row">
    	  <div class="row">
    		<div class="col s12">
		      <ul id="engineList" class="collection with-header" style="overflow: auto; height: calc(100vh - 130px); border-radius: 3px; background: white;">
                <li class="collection-header"><h5>Engines</h5></li>
			  </ul>
		    </div>
  		  </div>
    	</div>
      	<div id="projectPanels" class="row">
    	  <div class="row">
    		<div class="col s12">
		      <ul id="projectList" class="collection with-header" style="overflow: auto; height: calc(100vh - 130px); border-radius: 3px; background: white;">
                <li class="collection-header"><h5>Projects</h5></li>
			  </ul>
		    </div>
  		  </div>
    	</div>
      	<div id="requestPanels" class="row">
    	  <div class="row">
    		<div class="col s12">
		      <ul id="requestList" class="collection with-header" style="overflow: auto; height: calc(100vh - 130px); border-radius: 3px; background: white;">
                <li class="collection-header"><h5>Recent Requests</h5></li>
			  </ul>
		    </div>
  		  </div>
    	</div>
    	<div id="taskPanels" class="row">
    	  <div class="row">
    		<div class="col s12">
		      <ul id="taskList" class="collection with-header" style="overflow: auto; height: calc(100vh - 130px); border-radius: 3px; background: white;">
                <li class="collection-header"><h5>Recent Scheduled Tasks</h5></li>
			  </ul>
		    </div>
  		  </div>
    	</div>
    	<div id="creatorPanel" class="row">
    		<div class="row">
				<h4>Process Creator</h4>
			</div>
			<div class="row">
			    <div class="col s12">
					<div class="fixed-action-btn">
					  <a class="btn-floating btn-large red">
					    <i class="large material-icons">menu</i>
					  </a>
					  <ul>
					    <li><a class="btn-floating red tooltipped" data-position="top" data-tooltip="Start New Diagram" onclick="clearDiagram();"><i class="material-icons">clear</i></a></li>
					    <li><a class="btn-floating purple tooltipped" data-position="top" data-tooltip="Save Diagram as a Project" onclick="$('#projectName').val(viewedTask.name); $('#createProject').modal('open');"><i class="material-icons">build</i></a></li>
					    <li><a class="btn-floating green tooltipped" data-position="top" data-tooltip="Execute Diagram as a Request" onclick="executeDiagram('TopologyProcess');"><i class="material-icons">play_for_work</i></a></li>
					    <li><a class="btn-floating yellow darken-1 tooltipped" data-position="top" data-tooltip="Execute Diagram as a Scheduled Task" onclick="$('#scheduleTask').modal('open');"><i class="material-icons">schedule</i></a></li>
					    <li><a class="btn-floating blue tooltipped" data-position="top" data-tooltip="Add a Processor to the Diagram" onclick="$('#addProcessor').modal('open');"><i class="material-icons">playlist_add</i></a></li>
					  </ul>
					</div>
				</div>
			</div>
			<div class="row">
				<div id="creatorContainer">
					<div class="jtk-demo-canvas canvas-wide flowchart-demo jtk-surface jtk-surface-nopan zoomItem" id="canvas" style="overflow: auto; height: calc(100vh - 64px); width: calc(100vw - 300px); position: absolute; left: 300px; top: 64px;">
					</div>
				</div>
			</div>
    	</div>
    	<div id="logPanel" class="row">
			<div class="row">
				<div class="col s12">
				  <div class="card white z-depth-0" style="border: 1px solid #e0e0e0;">
					<div class="card-content black-text">
					  <span class="card-title">Logs</span>
					  <div class="row">
					  	<div class="input-field col s12">
							<input placeholder="filter..." id="filterLogTable" type="text" class="validate" onkeyup="setFilterText();">
							<label for="filterLogTable">Filter:</label>
						</div>
					  </div>
					  <div class="row">
						  <div id="logContent" style="overflow: auto; height: 55vh;">
						  </div>
				      </div
					</div>
					<div class="card-action">
					  <a href="#" onclick="clearLogs();">Clear Logs</a>
					</div>
				  </div>
				</div>
			</div>
    	</div>
      </div>
    </main>
    <footer></footer>
	<div id="userDialog" class="modal">
      <div class="modal-content">
        <h4>User</h4>
        <div class="row">
			<div class="input-field col s12">
			  <input id="userNameInput" type="text" class="validate">
			  <label for="userNameInput">User Name</label>
			</div>
		</div>
        <div class="row">
			<div class="input-field col s12">
			  <input id="userPasswordInput" type="password" class="validate">
			  <label for="userPasswordInput">Password</label>
			</div>
		</div>
      </div>
      <div class="modal-footer">
      	<a href="#!" class="modal-close waves-effect waves-green btn-flat" onclick="login($('#userNameInput').val(), $('#userPasswordInput').val());">Log In</a>
        <a href="#!" class="modal-close waves-effect waves-red btn-flat">Close</a>
      </div>
    </div>
    <div id="taskInfo" class="modal">
      <div class="modal-content">
        <h4>View Request/Task Details</h4>
        <div id="taskInfoPanel" style="height: 100%; width: 100%;"></div>
      </div>
      <div class="modal-footer">
        <a href="#!" class="modal-close waves-effect waves-green btn-flat">Close</a>
      </div>
    </div>
    <div id="createProject" class="modal">
      <div class="modal-content">
        <h4>Create a Project</h4>
          <div class="row">
        	<div class="input-field col s12">
			  <input placeholder="Name" id="projectName" type="text" class="validate">
			  <label for="projectName">Project Name</label>
        	</div>
        </div>
      </div>
      <div class="modal-footer">
        <a href="#!" class="modal-close waves-effect waves-green btn-flat">Close</a>
        <a href="#!" class="waves-effect waves-green btn-flat" onclick="saveProject($('#projectName').val());">Save</a>
      </div>
    </div>
    <div id="mapDialog" class="modal" style="top: 75px !important; width: calc(100vw - 25px) !important; height: calc(100vh - 124px) !important; max-height: 100vh !important;">
      <div class="modal-content">
        <h4>Result Viewer</h4>
        <div id="mapid" style="height: calc(100vh - 277px);"></div>
      </div>
      <div class="modal-footer">
        <a href="#!" class="modal-close waves-effect waves-green btn-flat">Close</a>
      </div>
    </div>
    <div id="scheduleTask" class="modal">
      <div class="modal-content" style="height: 60vh; width: 50vw;">
        <h4>Task Scheduler</h4>
        <div class="row">
        	<div class="input-field col s12">
			  <input placeholder="Name" id="taskname" type="text" class="validate">
			  <label for="taskname">Task Name</label>
        	</div>
        </div>
        <div class="row">
			<div class="input-field col s6">
			  <input placeholder="Interval" id="taskInterval" type="text" class="validate">
			  <label for="taskInterval">Task Interval</label>
			</div>
			<div class="input-field col s6">
			  <div class="input-field col s6">
				  <select id="taskIntervalUnit">
					<option value="Seconds">Seconds</option>
					<option value="Minutes">Minutes</option>
					<option value="Hours">Hours</option>
					<option value="Days">Days</option>
				  </select>
				  <label>Interval</label>
				</div>
			</div>
        </div>
      </div>
      <div class="modal-footer">
        <a href="#!" class="modal-close waves-effect waves-green btn-flat">Close</a>
        <a href="#!" class="waves-effect waves-green btn-flat" onclick="executeDiagram('TopologyTask');">Execute</a>
      </div>
    </div>
	<div id="addProcessor" class="modal" style="top: 75px !important; width: calc(100vw - 25px) !important; height: calc(100vh - 124px) !important; max-height: 100vh !important;">
      <div class="modal-content" style="height: calc(100% - 56px); overflow: auto;">
        <h4>Add a Processor</h4>
        <div class="row">
		  <div class="input-field col s8">
			  <select id="newProcessorType">
			  	<option value="areaCalculator">Area Calculator</option>
				<option value="lengthCalculator">Length Calculator</option>
				<option value="convexHullCreator">Convex Hull Creator</option>
				<option value="bufferFeature">Buffer Feature</option>
				<option value="bbox">Bounding Box</option>
				<option value="centroid">Centroid</option>
				<option value="centerOfMass">Center Of Mass</option>
				<option value="overlayOperator">Overlay Operator</option>
				<option value="aggregator">Aggregator</option>
				<option value="deaggregator">De-Aggregator</option>
				<option value="featureSimplifier">Feature Simplifier</option>
				<option value="featureValidator">Feature Validator</option>
				<option value="attributeCreator">Attribute Creator</option>
				<option value="attributeRenamer">Attribute Renamer</option>
				<option value="attributeRemover">Attribute Remover</option>
				<option value="attributeCalculator">Attribute Calculator</option>
				<option value="oracleReader">Oracle Reader</option>
				<option value="oracleWriter">Oracle Writer</option>
				<option value="spatialFilter">Spatial Filter</option>
				<option value="spatialRelationFilter">Spatial Relation Filter</option>
				<option value="conditionalFilter">Conditional Filter</option>
				<option value="voronoi">Voronoi</option>
				<option value="triangulator">Triangulator</option>
				<option value="shapeFileReader">ShapeFile Reader</option>
				<option value="shapeFileWriter">ShapeFile Writer</option>
				<option value="jsonReader">Json Reader</option>
				<option value="kmlReader">Kml Reader</option>
				<option value="kmlWriter">Kml Writer</option>
				<option value="featureHolder">Feature Holder</option>
				<option value="force2d">Force 2D</option>
				<option value="donutRemover">Donut Remover</option>
				<option value="donutExtracter">Donut Extracter</option>
				<option value="areaAmalgamater">Area Amalgamater/Dissolver</option>
				<option value="lineAmalgamater">Line Amalgamater/Dissolver</option>
				<option value="polygonCenterLine">Polygon Center Line</option>
				<option value="projector">Projector</option>
			  </select>
			  <label>Processor Type</label>
			</div>
			<div class="col s4">
				<a href="#!" class="waves-effect waves-green btn-flat" onclick="addNewProcessor();">Add</a>
			</div>
        </div>
		<h4 class="header">Readers</h4>
        <div class="row">
			<div class="col s12 m6 l3">
				<div class="card white">
				  <div class="card-content black-text" style="height: 200px; overflow: auto;">
					<span class="card-title">JSON Reader</span>
					<p>JSON Reader will create a feature list from the supplied json location. Must be an array of VTS Features or GeoJSON objects</p>
				  </div>
					<div class="card-action">
					  <a href="#" onclick="$('#newProcessorType').val('jsonReader'); addNewProcessor();">Add</a>
					</div>
				</div>
			</div>
			<div class="col s12 m6 l3">
				<div class="card white">
				  <div class="card-content black-text" style="height: 200px; overflow: auto;">
					<span class="card-title">KML Reader</span>
					<p>KML Reader will create a feature list from the supplied KML location. KMZ not currently supported</p>
				  </div>
					<div class="card-action">
					  <a href="#" onclick="$('#newProcessorType').val('kmlReader'); addNewProcessor();">Add</a>
					</div>
				</div>
			</div>
			<div class="col s12 m6 l3">
				<div class="card white">
				  <div class="card-content black-text" style="height: 200px; overflow: auto;">
				  	<span class="card-title">Oracle Reader</span>
					<p>Oracle reader creates a feature set from a given oracle connection</p>
				  </div>
					<div class="card-action">
					  <a href="#" onclick="$('#newProcessorType').val('oracleReader'); addNewProcessor();">Add</a>
					</div>
    			</div>
			</div>
			<div class="col s12 m6 l3">
				<div class="card white">
				  <div class="card-content black-text" style="height: 200px; overflow: auto;">
					<span class="card-title">ShapeFile Reader</span>
					<p>Shapefile Reader will create a feature list from the supplied shapefile location</p>
				  </div>
					<div class="card-action">
					  <a href="#" onclick="$('#newProcessorType').val('shapeFileReader'); addNewProcessor();">Add</a>
					</div>
				</div>
			</div>
        </div>
		<h4 class="header">Writers</h4>
        <div class="row">
			<div class="col s12 m6 l3">
				<div class="card white">
				  <div class="card-content black-text" style="height: 200px; overflow: auto;">
					<span class="card-title">KML Writer</span>
					<p>KML Writer will create a KML from the supplied feature list at the specified location.</p>
				  </div>
					<div class="card-action">
					  <a href="#" onclick="$('#newProcessorType').val('kmlWriter'); addNewProcessor();">Add</a>
					</div>
				</div>
			</div>
			<div class="col s12 m6 l3">
				<div class="card white">
				  <div class="card-content black-text" style="height: 200px; overflow: auto;">
				  	<span class="card-title">Oracle Writer</span>
					<p>Oracle Writer writes features to the given oracle connection</p>
				  </div>
					<div class="card-action">
					  <a href="#" onclick="$('#newProcessorType').val('oracleWriter'); addNewProcessor();">Add</a>
					</div>
    			</div>
			</div>
			<div class="col s12 m6 l3">
				<div class="card white">
				  <div class="card-content black-text" style="height: 200px; overflow: auto;">
					<span class="card-title">ShapeFile Writer</span>
					<p>Shapefile Writer will create a shapefile from the supplied feature list at the specified location.</p>
				  </div>
					<div class="card-action">
					  <a href="#" onclick="$('#newProcessorType').val('shapeFileWriter'); addNewProcessor();">Add</a>
					</div>
				</div>
			</div>
        </div>
		<h4 class="header">Calculators</h4>
		<div class="row">
			<div class="col s12 m6 l3">
				<div class="card white">
				  <div class="card-content black-text" style="height: 200px; overflow: auto;">
				  	<span class="card-title">Area Calculator</span>
					<p>Area Calculator is used to calculate the area for all input features</p>
				  </div>
					<div class="card-action">
					  <a href="#" onclick="$('#newProcessorType').val('areaCalculator'); addNewProcessor();">Add</a>
					</div>
    			</div>
			</div>
			<div class="col s12 m6 l3">
				<div class="card white">
				  <div class="card-content black-text" style="height: 200px; overflow: auto;">
				  	<span class="card-title">Length Calculator</span>
					<p>Length Calculator is used to calculate the length or perimeter for all input features</p>
				  </div>
					<div class="card-action">
					  <a href="#" onclick="$('#newProcessorType').val('lengthCalculator'); addNewProcessor();">Add</a>
					</div>
    			</div>
			</div>
		</div>
		<h4 class="header">Attributes</h4>
		<div class="row">
			<div class="col s12 m6 l3">
				<div class="card white">
				  <div class="card-content black-text" style="height: 200px; overflow: auto;">
				  	<span class="card-title">Attribute Calculator</span>
					<p>Attribute calculator allows you to specify an attribute and an expression. The attribute value will be populated by the expression result, calculated for each featuer in the input list.</p>
				  </div>
					<div class="card-action">
					  <a href="#" onclick="$('#newProcessorType').val('attributeCalculator'); addNewProcessor();">Add</a>
					</div>
    			</div>
			</div>
			<div class="col s12 m6 l3">
				<div class="card white">
				  <div class="card-content black-text" style="height: 200px; overflow: auto;">
				  	<span class="card-title">Attribute Creator</span>
					<p>Attribute Creator allows you to define new attribute columns that will be added to all input features</p>
				  </div>
					<div class="card-action">
					  <a href="#" onclick="$('#newProcessorType').val('attributeCreator'); addNewProcessor();">Add</a>
					</div>
    			</div>
			</div>
			<div class="col s12 m6 l3">
				<div class="card white">
				  <div class="card-content black-text" style="height: 200px; overflow: auto;">
				  	<span class="card-title">Attribute Remover</span>
					<p>Attribute Remover will remove a specified list of existing attribute columns for all input features</p>
				  </div>
					<div class="card-action">
					  <a href="#" onclick="$('#newProcessorType').val('attributeRemover'); addNewProcessor();">Add</a>
					</div>
    			</div>
			</div>
			<div class="col s12 m6 l3">
				<div class="card white">
				  <div class="card-content black-text" style="height: 200px; overflow: auto;">
				  	<span class="card-title">Attribute Renamer</span>
					<p>Attribute Creator allows you to rename existing attribute columns for all input features</p>
				  </div>
					<div class="card-action">
					  <a href="#" onclick="$('#newProcessorType').val('attributeRenamer'); addNewProcessor();">Add</a>
					</div>
    			</div>
			</div>
		</div>
		<h4 class="header">Transformation</h4>
		<div class="row">
			<div class="col s12 m6 l3">
				<div class="card white">
				  <div class="card-content black-text" style="height: 200px; overflow: auto;">
				  	<span class="card-title">Area Amalgamater</span>
					<p>Merges feature polygons together wherever they interact. Non-interacting polygons will not merge. Warning: The dissolve operation will potentially result in a loss of attributes.</p>
				  </div>
					<div class="card-action">
					  <a href="#" onclick="$('#newProcessorType').val('areaAmalgamater'); addNewProcessor();">Add</a>
					</div>
    			</div>
			</div>
			<div class="col s12 m6 l3">
				<div class="card white">
				  <div class="card-content black-text" style="height: 200px; overflow: auto;">
				  	<span class="card-title">Line Amalgamater</span>
					<p>Merges feature line strings together wherever they interact. Non-interacting linestrings will not merge. Warning: The dissolve operation will potentially result in a loss of attributes.</p>
				  </div>
					<div class="card-action">
					  <a href="#" onclick="$('#newProcessorType').val('lineAmalgamater'); addNewProcessor();">Add</a>
					</div>
    			</div>
			</div>
			<div class="col s12 m6 l3">
				<div class="card white">
				  <div class="card-content black-text" style="height: 200px; overflow: auto;">
				  	<span class="card-title">Aggregator</span>
					<p>Aggregator merges all supplied features into a single multifeature geometry collection. If there are multiple sources, sources will only be aggregated from their source group</p>
				  </div>
					<div class="card-action">
					  <a href="#" onclick="$('#newProcessorType').val('aggregator'); addNewProcessor();">Add</a>
					</div>
    			</div>
			</div>
			<div class="col s12 m6 l3">
				<div class="card white">
				  <div class="card-content black-text" style="height: 200px; overflow: auto;">
				  	<span class="card-title">Deaggregator</span>
					<p>Deaggregator breaks all input multi geometry features into individual features. This will clone attribute sets.</p>
				  </div>
					<div class="card-action">
					  <a href="#" onclick="$('#newProcessorType').val('deaggregator'); addNewProcessor();">Add</a>
					</div>
    			</div>
			</div>
			<div class="col s12 m6 l3">
				<div class="card white">
				  <div class="card-content black-text" style="height: 200px; overflow: auto;">
				  	<span class="card-title">Buffer Feature</span>
					<p>Buffer Feature adds the specified distance buffer to all input features</p>
				  </div>
					<div class="card-action">
					  <a href="#" onclick="$('#newProcessorType').val('bufferFeature'); addNewProcessor();">Add</a>
					</div>
    			</div>
			</div>
			<div class="col s12 m6 l3">
				<div class="card white">
				  <div class="card-content black-text" style="height: 200px; overflow: auto;">
				  	<span class="card-title">Bounding Box</span>
					<p>bbox will create a Bounding Box encompassing all input features</p>
				  </div>
					<div class="card-action">
					  <a href="#" onclick="$('#newProcessorType').val('bbox'); addNewProcessor();">Add</a>
					</div>
    			</div>
			</div>
			<div class="col s12 m6 l3">
				<div class="card white">
				  <div class="card-content black-text" style="height: 200px; overflow: auto;">
				  	<span class="card-title">Convex Hull Creator</span>
					<p>Convex Hull Creator creates a convex hull from all input features</p>
				  </div>
					<div class="card-action">
					  <a href="#" onclick="$('#newProcessorType').val('convexHullCreator'); addNewProcessor();">Add</a>
					</div>
    			</div>
			</div>
			<div class="col s12 m6 l3">
				<div class="card white">
				  <div class="card-content black-text" style="height: 200px; overflow: auto;">
				  	<span class="card-title">Centroid</span>
					<p>Centroid will calculate the centerpoint for all input features. This may be different the center of mass</p>
				  </div>
					<div class="card-action">
					  <a href="#" onclick="$('#newProcessorType').val('centroid'); addNewProcessor();">Add</a>
					</div>
    			</div>
			</div>
			<div class="col s12 m6 l3">
				<div class="card white">
				  <div class="card-content black-text" style="height: 200px; overflow: auto;">
				  	<span class="card-title">Center of Mass</span>
					<p>Center of Mass will calculate the real center of all input features</p>
				  </div>
					<div class="card-action">
					  <a href="#" onclick="$('#newProcessorType').val('centerOfMass'); addNewProcessor();">Add</a>
					</div>
    			</div>
			</div>
			<div class="col s12 m6 l3">
				<div class="card white">
				  <div class="card-content black-text" style="height: 200px; overflow: auto;">
				  	<span class="card-title">Donut Remover</span>
					<p>Removes any interior rings found in polygons from the input feature list.</p>
				  </div>
					<div class="card-action">
					  <a href="#" onclick="$('#newProcessorType').val('donutRemover'); addNewProcessor();">Add</a>
					</div>
    			</div>
			</div>
			<div class="col s12 m6 l3">
				<div class="card white">
				  <div class="card-content black-text" style="height: 200px; overflow: auto;">
				  	<span class="card-title">Donut Extracter</span>
					<p>Extracts the donuts from the input feature list, and replaces the feature geometry with the donuts.</p>
				  </div>
					<div class="card-action">
					  <a href="#" onclick="$('#newProcessorType').val('donutExtracter'); addNewProcessor();">Add</a>
					</div>
    			</div>
			</div>
			<div class="col s12 m6 l3">
				<div class="card white">
				  <div class="card-content black-text" style="height: 200px; overflow: auto;">
				  	<span class="card-title">Feature Simplifier</span>
					<p>Overlay Operator performs a spatial overlay operation over all input features against one or more of operator features</p>
				  </div>
					<div class="card-action">
					  <a href="#" onclick="$('#newProcessorType').val('featureSimplifier'); addNewProcessor();">Add</a>
					</div>
    			</div>
			</div>
			<div class="col s12 m6 l3">
				<div class="card white">
				  <div class="card-content black-text" style="height: 200px; overflow: auto;">
				  	<span class="card-title">Force 2D</span>
					<p>Removes any 3D Z index in the geometry, forcing it to be a 2D geometry.</p>
				  </div>
					<div class="card-action">
					  <a href="#" onclick="$('#newProcessorType').val('force2d'); addNewProcessor();">Add</a>
					</div>
    			</div>
			</div>
			<div class="col s12 m6 l3">
				<div class="card white">
				  <div class="card-content black-text" style="height: 200px; overflow: auto;">
				  	<span class="card-title">Overlay Operator</span>
					<p>Overlay Operator performs a spatial overlay operation over all input features against one or more of operator features. If no operator features are supplied, the overlay will perform over the input features instead.</p>
				  </div>
					<div class="card-action">
					  <a href="#" onclick="$('#newProcessorType').val('overlayOperator'); addNewProcessor();">Add</a>
					</div>
    			</div>
			</div>
			<div class="col s12 m6 l3">
				<div class="card white">
				  <div class="card-content black-text" style="height: 200px; overflow: auto;">
				  	<span class="card-title">Triangulator</span>
					<p>Triangulator will generate the Delauny triangulation grid from all coordinates supplied in the feature list. If features are lines or polygons, they will be broken out into coordinate lists.</p>
				  </div>
					<div class="card-action">
					  <a href="#" onclick="$('#newProcessorType').val('triangulator'); addNewProcessor();">Add</a>
					</div>
    			</div>
			</div>
			<div class="col s12 m6 l3">
				<div class="card white">
				  <div class="card-content black-text" style="height: 200px; overflow: auto;">
				  	<span class="card-title">Voronoi</span>
					<p>Voronoi will generate the voronoi grid from all coordinates supplied in the feature list. If features are lines or polygons, they will be broken out into coordinate lists.</p>
				  </div>
					<div class="card-action">
					  <a href="#" onclick="$('#newProcessorType').val('voronoi'); addNewProcessor();">Add</a>
					</div>
    			</div>
			</div>
			<div class="col s12 m6 l3">
				<div class="card white">
				  <div class="card-content black-text" style="height: 200px; overflow: auto;">
				  	<span class="card-title">Polygon Center Liner</span>
					<p>Generates center lines from all input polygons</p>
				  </div>
					<div class="card-action">
					  <a href="#" onclick="$('#newProcessorType').val('polygonCenterLine'); addNewProcessor();">Add</a>
					</div>
    			</div>
			</div>
			<div class="col s12 m6 l3">
				<div class="card white">
				  <div class="card-content black-text" style="height: 200px; overflow: auto;">
				  	<span class="card-title">Projector</span>
					<p>Reprojects geometry from one SRID to another</p>
				  </div>
					<div class="card-action">
					  <a href="#" onclick="$('#newProcessorType').val('projector'); addNewProcessor();">Add</a>
					</div>
    			</div>
			</div>
		</div>
		<h4 class="header">Utility</h4>
        <div class="row">
			<div class="col s12 m6 l3">
				<div class="card white">
				  <div class="card-content black-text" style="height: 200px; overflow: auto;">
				  	<span class="card-title">Validator</span>
					<p>Validator performs a spatial validation on all input features. Results are stored in added attributes</p>
				  </div>
					<div class="card-action">
					  <a href="#" onclick="$('#newProcessorType').val('featureValidator'); addNewProcessor();">Add</a>
					</div>
    			</div>
			</div>
			<div class="col s12 m6 l3">
				<div class="card white">
				  <div class="card-content black-text" style="height: 200px; overflow: auto;">
				  	<span class="card-title">Spatial Filter</span>
					<p>Spatial Filter performs a filter on the input features, only returning features that match the specified feature type(s)</p>
				  </div>
					<div class="card-action">
					  <a href="#" onclick="$('#newProcessorType').val('spatialFilter'); addNewProcessor();">Add</a>
					</div>
    			</div>
			</div>
			<div class="col s12 m6 l3">
				<div class="card white">
				  <div class="card-content black-text" style="height: 200px; overflow: auto;">
				  	<span class="card-title">Spatial Relationship Filter</span>
					<p>Spatial Relation Filter will filter input features if they interact with one or more of the operator features via the specified method(s). If no operator features are present, features will be tested against the main feature set.</p>
				  </div>
					<div class="card-action">
					  <a href="#" onclick="$('#newProcessorType').val('spatialRelationFilter'); addNewProcessor();">Add</a>
					</div>
    			</div>
			</div>
			<div class="col s12 m6 l3">
				<div class="card white">
				  <div class="card-content black-text" style="height: 200px; overflow: auto;">
				  	<span class="card-title">Conditional Filter</span>
					<p>Conditional Filter allows you to define any number of required conditions, only allowing through those features that meet the conditions specified.</p>
				  </div>
					<div class="card-action">
					  <a href="#" onclick="$('#newProcessorType').val('conditionalFilter'); addNewProcessor();">Add</a>
					</div>
    			</div>
			</div>
			<div class="col s12 m6 l3">
				<div class="card white">
				  <div class="card-content black-text" style="height: 200px; overflow: auto;">
				  	<span class="card-title">Feature Holder</span>
					<p>Holds all supplied feature lists, merging them into a single resulting list.</p>
				  </div>
					<div class="card-action">
					  <a href="#" onclick="$('#newProcessorType').val('featureHolder'); addNewProcessor();">Add</a>
					</div>
    			</div>
			</div>
		</div>
      </div>
      <div class="modal-footer">
      	<a href="#!" class="modal-close waves-effect waves-green btn-flat">Close</a>
      </div>
    </div>
	<script type="text/javascript">
	  $(document).ready(function()
      {
		$('.modal').modal();
	    $('.sidenav').sidenav();
		$('select').formSelect();
		$('.tooltipped').tooltip();

		serviceUpdate();
	    setInterval(function ()
   	    {
   	    	// reload the job ID list and health every few seconds, and update the UI
   	    	// maybe make this a toggle? or only active in certain screens?
   	        serviceUpdate();
   	    }, 7000);

  		$('.fixed-action-btn').floatingActionButton(
  		{
    		toolbarEnabled: false,
    		hoverEnabled: false,
    		direction: 'left'
  		});

		$('#projectPanels').hide();
		$('#taskPanels').hide();
		$('#requestPanels').hide();
		$('#creatorPanel').hide();
		$('#logPanel').hide();
		$('#enginePanels').hide();

   	    map = L.map('mapid').setView([51.5, -120.5], 3);
		L.esri.basemapLayer('Topographic').addTo(map);
		map.invalidateSize();

		resizeMargins();
	  });

	  function resizeMargins()
	  {
		 var width = $(window).width();

		if(width > 993)
		{
			$("main").css("margin-left", "320px");
			$(".brand-logo").css("left", "320px");
			$("#canvas").css("left", "300px");
			$(".brand-logo").text("Vivid Topology Service Admin UI");
		}
		else
		{
			$("main").css("margin-left", "0px");
			$(".brand-logo").css("left", "50%");
			$(".brand-logo").text("VTS");
			$("#canvas").css("left", "0px");
		}
	  }
	</script>
  </body>
</html>